<head>
  <title>Ver 1.2</title>
</head>
<body>
  <h1 style='display:block;width:15%;border-bottom: solid 1px black;'>SCP</h1>
  <div id='output'></div>

  <script>
    const args = {'creator': 'Creador'};  // Definir la clave del JSON que quieres mostrar
    var main_json_file = "https://raw.githubusercontent.com/scp-data/scp-api/main/docs/data/scp/items/content_archived.json";

    document.addEventListener('DOMContentLoaded', (main_event) => {
        // Cargar el JSON al cargar el DOM
        fetch(main_json_file)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Error al cargar el archivo JSON');
                }
                return response.json();  // Convertir la respuesta a JSON
            })
            .then(data => {
                console.log("Datos recibidos:", data);  // Verificar la estructura del JSON en consola

                const outputDiv = document.getElementById('output');

                // Dependiendo de la estructura del JSON, accederemos correctamente
                for (const k in data) {
                    // Cada `k` es una clave del objeto principal
                    const row = document.createElement('div');
                    const v = data[k];  // El valor asociado a la clave

                    // Verificar si es un objeto dentro del JSON
                    if (typeof v === 'object' && v !== null) {
                        Object.entries(args).forEach(([key, name]) => {
                            if (v.hasOwnProperty(key)) {  // Verificar si existe la clave
                                const kv = document.createElement('p');
                                kv.innerHTML = `<b>${name}:</b> ${v[key]}`;
                                row.appendChild(kv);
                            }
                        });
                    }

                    // AÃ±adir la fila al contenedor de salida
                    outputDiv.appendChild(row);
                }
            })
            .catch(error => {
                console.error('Hubo un problema con la solicitud Fetch:', error);
            });
    });
  </script>
</body>
